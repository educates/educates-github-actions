#@ load("@ytt:data", "data")
#@ load("@ytt:yaml", "yaml")
#@ load("@ytt:regexp", "regexp")
#@ load("@ytt:template", "template")

#@ def fixup_resource(obj):
#@   if type(obj) == "string":
#@     return regexp.replace(data.values.image_regular_expression, obj, data.values.image_replacement_string).format(**data.values)
#@   elif type(obj) == "dict":
#@     return {k: fixup_resource(v) for k, v in obj.items()}
#@   elif type(obj) == "list":
#@     return [fixup_resource(v) for v in obj]
#@   else:
#@     return obj
#@   end
#@ end

_: #@ template.replace(fixup_resource(yaml.decode(data.read(data.values.workshop_resource_file))))
